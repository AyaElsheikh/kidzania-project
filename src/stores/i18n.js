import { defineStore } from 'pinia'

const LS_KEY = 'kidzania_locale'

const messages = {
  ar: {
    'nav.home': 'الرئيسية',
    'nav.courses': 'الكورسات',
    'nav.profile': 'كورساتي',
    'nav.tests': 'الاختبارات',
    'nav.myCourses': 'كورساتي',
    'nav.explore': 'استكشف',
    'nav.playWithUs': 'العب معنا',
    'nav.register': 'سجل',
    'nav.login': 'تسجيل الدخول',
    'nav.signup': 'سجل الآن',
    'home.title': 'هنا تلمع عقول الأطفال',
    'home.desc': 'انضم إلينا في رحلة تعلم ممتعة حيث كل درس يصبح مغامرة لا تُنسى.',
    'home.learnMore': 'اعرف المزيد',
    'home.explore': 'استكشف الكورسات',
    'home.myCourses': 'كورساتي',
    'categories.title': 'أقسام الكورسات',
    'recommended.title': 'كورسات موصى بها بشدة',
    'recommended.subtitle': 'دروس مختارة بعناية يحبها الأطفال - ممتعة، تفاعلية، ومثالية لرحلة التعلم',
    'home.empowering': 'نُمكّن العقول الصغيرة',
    'home.empowering.subtitle': 'عالم من الدروس التفاعلية المصممة للأطفال',
    'feature.lessons': 'دروس تفاعلية',
    'feature.lessonsDesc': 'اضغط، اسحب، والعب لفهم المفاهيم',
    'feature.games': 'ألعاب تنشيطية للدماغ',
    'feature.gamesDesc': 'ألغاز وتحديات ممتعة تبني المهارات',
    'feature.story': 'تعلم قائم على القصص',
    'feature.storyDesc': 'مغامرات تجعل كل درس لا يُنسى',
    'feature.creative': 'أنشطة إبداعية',
    'feature.creativeDesc': 'تلوين، رسم، ومهام خيالية',
    'courses.title': 'الكورسات',
    'course.ageLabel': 'العمر:',
    'course.seatsLabel': 'المقاعد:',
    'course.categoryLabel': 'الفئة',
    'filters.all': 'الكل',
    'category.arabic': 'عربي',
    'category.english': 'إنجليزي',
    'category.math': 'رياضيات',
    'auth.name': 'الاسم',
    'auth.email': 'الايميل',
    'auth.signup': 'تسجيل',
    'button.confirm': 'تأكيد',
    'courseDetail.lessons': 'الدروس',
    'courseDetail.subscribe': 'اشترك',
    'courseDetail.start': 'ابدأ المشاهدة',
    'courseDetail.notFound': 'لم يتم العثور على الكورس',
    'subscribe.title': 'اشتراك',
    'subscribe.confirmText': 'ستتم إضافة {title} إلى اشتراكاتك.',
    'profile.title': 'كورساتي',
    'profile.empty': 'لا يوجد اشتراكات بعد',
    'notFound.title': '404',
    'notFound.back': 'العودة للرئيسية',
    'player.locked': 'اشترك لمشاهدة الفيديو',
    'tests.title': 'الاختبارات',
    'tests.subtitle': 'اختبر معرفتك مع اختبارات تفاعلية',
    'tests.course': 'الكورس',
    'tests.start': 'ابدأ الاختبار',
    'tests.empty': 'لا توجد اختبارات متاحة حالياً',
    'play.title': 'العب معنا',
    'play.subtitle': 'استمتع بألعاب وأنشطة تفاعلية ممتعة',
    'play.games': 'ألعاب تعليمية',
    'play.gamesDesc': 'ألعاب ممتعة تساعدك على التعلم',
    'play.activities': 'أنشطة تفاعلية',
    'play.activitiesDesc': 'أنشطة ممتعة ومفيدة',
    'play.challenges': 'تحديات',
    'play.challengesDesc': 'تحديات لاختبار مهاراتك',
    'testimonials.title': 'موثوق من قبل الآباء',
    'testimonials.subtitle': 'آراء حقيقية من العائلات التي تحب التعلم معنا',
    'testimonials.quote': 'ابنتي تحب دروس العربية! تطلب اللعب بها كل يوم - يبدو الأمر وكأنه لعبة وليس واجب منزلي.',
    'testimonials.author': 'سارة، مصر - أم وليد',
    'footer.tagline': 'نساعد العقول الصغيرة على التعلم والنمو والتألق كل يوم.',
    'footer.about': 'من نحن',
    'footer.aboutUs': 'من نحن',
    'footer.contact': 'اتصل بنا',
    'footer.contactInfo': 'معلومات الاتصال',
    'footer.pages': 'الصفحات',
    'footer.feedbacks': 'التقييمات',
    'footer.phone': '+011290033300',
    'footer.email': 'Kidsademy@org.com',
    'footer.address': '12 str New Cairo, Cairo.',
    'footer.newsletter': 'اشترك في نشرتنا الإخبارية',
    'footer.emailPlaceholder': 'أدخل عنوان البريد الإلكتروني',
    'footer.subscribe': 'اشترك',
    'footer.copyright': '© 2025 – All rights reserved.'
  },
  en: {
    'nav.home': 'Home',
    'nav.courses': 'Courses',
    'nav.profile': 'My Courses',
    'nav.tests': 'Tests',
    'nav.myCourses': 'My courses',
    'nav.explore': 'Explore',
    'nav.playWithUs': 'Play with Us',
    'nav.register': 'Register',
    'nav.login': 'Login',
    'nav.signup': 'Enroll',
    'home.title': 'Here Little Minds Shine Bright',
    'home.desc': 'Join us on a fun learning journey where every lesson becomes an unforgettable adventure.',
    'home.learnMore': 'Learn more',
    'home.explore': 'Explore Courses',
    'home.myCourses': 'My Courses',
    'categories.title': 'Course Categories',
    'recommended.title': 'Highly Recommended Courses',
    'recommended.subtitle': 'Carefully selected lessons kids love fun, interactive, and perfect for their learning journey.',
    'home.empowering': 'Empowering Young Minds',
    'home.empowering.subtitle': 'A world of fun, interactive learning made just for kids',
    'feature.lessons': 'Interactive Lessons',
    'feature.lessonsDesc': 'Tap, drag, and play to understand concepts',
    'feature.games': 'Brain-Boosting Games',
    'feature.gamesDesc': 'Puzzles and fun challenges that build skills',
    'feature.story': 'Story-Based Learning',
    'feature.storyDesc': 'Adventures that make every lesson memorable',
    'feature.creative': 'Creative Activities',
    'feature.creativeDesc': 'Coloring, drawing, and imagination tasks',
    'courses.title': 'Courses',
    'course.ageLabel': 'Age:',
    'course.seatsLabel': 'Seats:',
    'course.categoryLabel': 'Category',
    'filters.all': 'All',
    'category.arabic': 'Arabic',
    'category.english': 'English',
    'category.math': 'Math',
    'auth.name': 'Name',
    'auth.email': 'Email',
    'auth.signup': 'Sign Up',
    'button.confirm': 'Confirm',
    'courseDetail.lessons': 'Lessons',
    'courseDetail.subscribe': 'Subscribe',
    'courseDetail.start': 'Start Watching',
    'courseDetail.notFound': 'Course not found',
    'subscribe.title': 'Subscribe',
    'subscribe.confirmText': '{title} will be added to your subscriptions.',
    'profile.title': 'My Courses',
    'profile.empty': 'No subscriptions yet',
    'notFound.title': '404',
    'notFound.back': 'Back to Home',
    'player.locked': 'Subscribe to watch the video',
    'tests.title': 'Tests',
    'tests.subtitle': 'Test your knowledge with interactive quizzes',
    'tests.course': 'Course',
    'tests.start': 'Start Test',
    'tests.empty': 'No tests available at the moment',
    'play.title': 'Play with Us',
    'play.subtitle': 'Enjoy fun interactive games and activities',
    'play.games': 'Educational Games',
    'play.gamesDesc': 'Fun games that help you learn',
    'play.activities': 'Interactive Activities',
    'play.activitiesDesc': 'Fun and engaging activities',
    'play.challenges': 'Challenges',
    'play.challengesDesc': 'Challenges to test your skills',
    'testimonials.title': 'Trusted by Parents',
    'testimonials.subtitle': 'Real reviews from families who love learning with us',
    'testimonials.quote': 'My daughter loves the Arabic lessons! She asks to play them every day - it feels like a game, not homework.',
    'testimonials.author': 'Sara, Egypt - Mother of Waleed',
    'footer.tagline': 'Helping little minds learn, grow, and shine every day.',
    'footer.about': 'About',
    'footer.aboutUs': 'About Us',
    'footer.contact': 'Contact',
    'footer.contactInfo': 'Contact Info',
    'footer.pages': 'Pages',
    'footer.feedbacks': 'Feedbacks',
    'footer.phone': '+011290033300',
    'footer.email': 'Kidsademy@org.com',
    'footer.address': '12 str New Cairo, Cairo.',
    'footer.newsletter': 'Subscribe to Our Newsletter',
    'footer.emailPlaceholder': 'Enter Email Address',
    'footer.subscribe': 'Subscribe',
    'footer.copyright': '© 2025 – All rights reserved.'
  }
}

export const useI18nStore = defineStore('i18n', {
  state: () => ({ locale: 'ar' }),
  actions: {
    t(key, params) {
      const msg = messages[this.locale][key] || key
      if (!params) return msg
      return msg.replace(/\{(\w+)\}/g, (_, k) => params[k] ?? '')
    },
    apply() {
      const isAr = this.locale === 'ar'
      document.documentElement.lang = this.locale
      document.documentElement.dir = isAr ? 'rtl' : 'ltr'
    },
    load() {
      const raw = localStorage.getItem(LS_KEY)
      if (raw) this.locale = raw
      this.apply()
    },
    setLocale(loc) {
      this.locale = loc
      localStorage.setItem(LS_KEY, loc)
      this.apply()
    }
  }
})

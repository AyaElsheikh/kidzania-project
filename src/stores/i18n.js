import { defineStore } from 'pinia'

const LS_KEY = 'kidzania_locale'

const messages = {
  ar: {
    'nav.home': 'الرئيسية',
    'nav.courses': 'الكورسات',
    'nav.profile': 'كورساتي',
    'nav.tests': 'الاختبارات',
    'nav.myCourses': 'كورساتي',
    'nav.explore': 'استكشف',
    'nav.playWithUs': 'العب معنا',
    'nav.register': 'سجل',
    'nav.login': 'تسجيل الدخول',
    'nav.signup': 'سجل الآن',
    'home.title': 'هنا تلمع عقول الأطفال',
    'home.desc': 'انضم إلينا في رحلة تعلم ممتعة حيث كل درس يصبح مغامرة لا تُنسى.',
    'home.learnMore': 'اعرف المزيد',
    'home.explore': 'استكشف الكورسات',
    'home.myCourses': 'كورساتي',
    'categories.title': 'أقسام الكورسات',
    'recommended.title': 'كورسات موصى بها بشدة',
    'recommended.subtitle': 'دروس مختارة بعناية يحبها الأطفال - ممتعة، تفاعلية، ومثالية لرحلة التعلم',
    'home.empowering': 'نُمكّن العقول الصغيرة',
    'home.empowering.subtitle': 'عالم من الدروس التفاعلية المصممة للأطفال',
    'feature.lessons': 'دروس تفاعلية',
    'feature.lessonsDesc': 'اضغط، اسحب، والعب لفهم المفاهيم',
    'feature.games': 'ألعاب تنشيطية للدماغ',
    'feature.gamesDesc': 'ألغاز وتحديات ممتعة تبني المهارات',
    'feature.story': 'تعلم قائم على القصص',
    'feature.storyDesc': 'مغامرات تجعل كل درس لا يُنسى',
    'feature.creative': 'أنشطة إبداعية',
    'feature.creativeDesc': 'تلوين، رسم، ومهام خيالية',
    'courses.title': 'الكورسات',
    'course.ageLabel': 'العمر:',
    'course.seatsLabel': 'المقاعد:',
    'course.categoryLabel': 'الفئة',
    'filters.all': 'الكل',
    'category.arabic': 'عربي',
    'category.english': 'إنجليزي',
    'category.math': 'رياضيات',
    'auth.name': 'الاسم',
    'auth.email': 'الايميل',
    'auth.signup': 'تسجيل',
    'auth.login': 'تسجيل الدخول',
    'auth.signin': 'سجل الدخول',
    'auth.fullName': 'الاسم الكامل',
    'auth.phone': 'رقم الهاتف',
    'auth.password': 'كلمة المرور',
    'auth.repeatPassword': 'أعد إدخال كلمة المرور',
    'auth.rememberMe': 'تذكرني',
    'auth.forgetPassword': 'نسيت كلمة المرور؟',
    'auth.enterName': 'أدخل اسمك',
    'auth.enterPhone': 'أدخل رقمك',
    'auth.enterEmail': 'أدخل بريدك الإلكتروني',
    'auth.enterPassword': '8 أحرف على الأقل',
    'auth.alreadyHaveAccount': 'لديك حساب بالفعل؟',
    'auth.newHere': 'جديد هنا؟',
    'auth.createAccount': 'إنشاء حساب',
    'auth.signInWithGoogle': 'سجل الدخول باستخدام Google',
    'auth.signInWithFacebook': 'سجل الدخول باستخدام Facebook',
    'auth.or': 'أو',
    'auth.errors.emailInvalid': 'البريد غير صحيح، استخدم صيغة name@example.com',
    'auth.errors.passwordMin': 'كلمة المرور لا تقل عن 8 أحرف',
    'auth.errors.nameRequired': 'الاسم مطلوب',
    'auth.errors.phoneInvalid': 'أدخل رقم هاتف صحيح',
    'auth.errors.passwordMismatch': 'كلمتا المرور غير متطابقتين',
    'auth.errors.noUser': 'لا يوجد حساب بهذا البريد، قم بعمل تسجيل',
    'auth.errors.badPassword': 'كلمة المرور غير صحيحة',
    'auth.errors.userExists': 'هذا البريد مسجل بالفعل، سجّل الدخول',
    'auth.errors.general': 'حدث خطأ، حاول مرة أخرى',
    'auth.errors.enterEmailFirst': 'أدخل بريدك الإلكتروني أولاً',
    'auth.resetLinkSent': 'تم إرسال رابط إعادة التعيين (تجريبي)',
    'button.confirm': 'تأكيد',
    'courseDetail.lessons': 'الدروس',
    'courseDetail.subscribe': 'اشترك',
    'courseDetail.start': 'ابدأ المشاهدة',
    'courseDetail.notFound': 'لم يتم العثور على الكورس',
    'courseDetail.overview': 'نظرة عامة على الكورس',
    'courseDetail.outline': 'محتوى الكورس',
    'courseDetail.otherCourses': 'كورسات أخرى للتعلم',
    'courseDetail.viewDetails': 'عرض التفاصيل',
    'courseDetail.lockedLesson': 'يجب الاشتراك لمشاهدة هذا الدرس',
    'courseDetail.subtitle': 'خصم 25% — اجعل {title} أسهل لطفلك!',
    'subscribe.title': 'اشتراك',
    'subscribe.confirmText': 'ستتم إضافة {title} إلى اشتراكاتك.',
    'profile.title': 'كورساتي',
    'profile.empty': 'لا يوجد اشتراكات بعد',
    'notFound.title': '404',
    'notFound.back': 'العودة للرئيسية',
    'player.locked': 'اشترك لمشاهدة الفيديو',
    'tests.title': 'الاختبارات',
    'tests.subtitle': 'اختبر معرفتك مع اختبارات تفاعلية',
    'tests.course': 'الكورس',
    'tests.start': 'ابدأ الاختبار',
    'tests.empty': 'لا توجد اختبارات متاحة حالياً',
    'play.title': 'العب معنا',
    'play.subtitle': 'استمتع بألعاب وأنشطة تفاعلية ممتعة',
    'play.games': 'ألعاب تعليمية',
    'play.gamesDesc': 'ألعاب ممتعة تساعدك على التعلم',
    'play.activities': 'أنشطة تفاعلية',
    'play.activitiesDesc': 'أنشطة ممتعة ومفيدة',
    'play.challenges': 'تحديات',
    'play.challengesDesc': 'تحديات لاختبار مهاراتك',
    'testimonials.title': 'موثوق من قبل الآباء',
    'testimonials.subtitle': 'آراء حقيقية من العائلات التي تحب التعلم معنا',
    'testimonials.quote': 'ابنتي تحب دروس العربية! تطلب اللعب بها كل يوم - يبدو الأمر وكأنه لعبة وليس واجب منزلي.',
    'testimonials.author': 'سارة، مصر - أم وليد',
    'footer.tagline': 'نساعد العقول الصغيرة على التعلم والنمو والتألق كل يوم.',
    'footer.about': 'من نحن',
    'footer.aboutUs': 'من نحن',
    'footer.contact': 'اتصل بنا',
    'footer.contactInfo': 'معلومات الاتصال',
    'footer.pages': 'الصفحات',
    'footer.feedbacks': 'التقييمات',
    'footer.phone': '+011290033300',
    'footer.email': 'Kidsademy@org.com',
    'footer.address': '12 str New Cairo, Cairo.',
    'footer.newsletter': 'اشترك في نشرتنا الإخبارية',
    'footer.emailPlaceholder': 'أدخل عنوان البريد الإلكتروني',
    'footer.subscribe': 'اشترك',
    'footer.copyright': '© 2025 – All rights reserved.',
    'home.heroLine1': 'حيث يصبح',
    'home.heroLine2': 'التعلم مثل',
    'home.heroLine3': 'وقت اللعب',
    'home.exploreNow': 'استكشف الآن',
    'home.topCourses': 'أفضل كورساتنا',
    'home.viewDetails': 'عرض التفاصيل',
    'course.learnArabic': 'تعلم العربية',
    'course.learnArabicDesc': 'الحروف والأصوات والكلمات البسيطة أصبحت سهلة من خلال القصص والألعاب.',
    'course.abcLearning': 'تعلم الأبجدية',
    'course.abcLearningDesc': 'تعلم الأبجدية مع الألعاب والأغاني والقصص! تعلم كلمات جديدة وقلها بصوت عالي.',
    'course.123Learning': 'تعلم الأرقام',
    'course.123LearningDesc': 'عد 1، 2، 3 مع ألغاز وأشكال ممتعة! اجمع، طابق، وحل التحديات الصغيرة.',
    'course.tag.music': 'موسيقى',
    'course.tag.games': 'ألعاب',
    'course.tag.puzzles': 'ألغاز',
    'course.tag.spell': 'إملاء',
    'course.tag.stories': 'قصص',
    'course.tag.count': 'عد',
    'course.tag.score': 'نقاط',
    'testimonials.quote1': 'ابنتي تحب دروس العربية! تطلب اللعب بها كل يوم - يبدو الأمر وكأنه لعبة وليس واجب منزلي.',
    'testimonials.author1': 'سارة، مصر',
    'testimonials.role1': 'أم وليد',
    'testimonials.quote2': 'ألعاب الرياضيات جعلت ابني متحمساً لممارسة الأرقام. الآن يعلم أخته الصغيرة أيضاً!',
    'testimonials.author2': 'نور، الإمارات',
    'testimonials.role2': 'أم سامي',
    'testimonials.quote3': 'الدروس التفاعلية أبقت أطفالي منشغلين وسعداء. لم أرهما بهذا الحماس للتعلم من قبل.',
    'testimonials.author3': 'لينا، السعودية',
    'testimonials.role3': 'أم جنا وعمر',
    'nav.admin': 'لوحة التحكم',
    'nav.loginButton': 'تسجيل الدخول',
    'nav.signupButton': 'سجل الآن',
    'explore.title': 'استكشف',
    'explore.courses': 'الكورسات',
    'explore.filters': 'الفلاتر',
    'explore.ages': 'الأعمار',
    'explore.sortBy': 'ترتيب حسب',
    'explore.all': 'الكل',
    'explore.free': 'مجاني',
    'explore.paid': 'مدفوع',
    'explore.viewDetails': 'عرض التفاصيل',
    'explore.ageRange.3-5': 'من 3 إلى 5 سنوات',
    'explore.ageRange.4-6': 'من 4 إلى 6 سنوات',
    'explore.ageRange.5-7': 'من 5 إلى 7 سنوات',
    'explore.ageRange.6-8': 'من 6 إلى 8 سنوات',
    'explore.ageRange.7-9': 'من 7 إلى 9 سنوات',
    'explore.ageRange.8-10': 'من 8 إلى 10 سنوات',
    'explore.sortAll': 'الكل',
    'explore.sortAZ': 'أ إلى ي',
    'explore.sortZA': 'ي إلى أ',
    'explore.sortPriceHigh': 'السعر (من الأعلى للأقل)',
    'explore.sortPriceLow': 'السعر (من الأقل للأعلى)',
    'explore.years': 'سنوات',
    'explore.lessons': 'دروس',
    'explore.courseFilters': 'فلاتر الكورسات'
  },
  en: {
    'nav.home': 'Home',
    'nav.courses': 'Courses',
    'nav.profile': 'My Courses',
    'nav.tests': 'Tests',
    'nav.myCourses': 'My courses',
    'nav.explore': 'Explore',
    'nav.playWithUs': 'Play with Us',
    'nav.register': 'Register',
    'nav.login': 'Login',
    'nav.signup': 'Enroll',
    'home.title': 'Here Little Minds Shine Bright',
    'home.desc': 'Join us on a fun learning journey where every lesson becomes an unforgettable adventure.',
    'home.learnMore': 'Learn more',
    'home.explore': 'Explore Courses',
    'home.myCourses': 'My Courses',
    'categories.title': 'Course Categories',
    'recommended.title': 'Highly Recommended Courses',
    'recommended.subtitle': 'Carefully selected lessons kids love fun, interactive, and perfect for their learning journey.',
    'home.empowering': 'Empowering Young Minds',
    'home.empowering.subtitle': 'A world of fun, interactive learning made just for kids',
    'feature.lessons': 'Interactive Lessons',
    'feature.lessonsDesc': 'Tap, drag, and play to understand concepts',
    'feature.games': 'Brain-Boosting Games',
    'feature.gamesDesc': 'Puzzles and fun challenges that build skills',
    'feature.story': 'Story-Based Learning',
    'feature.storyDesc': 'Adventures that make every lesson memorable',
    'feature.creative': 'Creative Activities',
    'feature.creativeDesc': 'Coloring, drawing, and imagination tasks',
    'courses.title': 'Courses',
    'course.ageLabel': 'Age:',
    'course.seatsLabel': 'Seats:',
    'course.categoryLabel': 'Category',
    'filters.all': 'All',
    'category.arabic': 'Arabic',
    'category.english': 'English',
    'category.math': 'Math',
    'auth.name': 'Name',
    'auth.email': 'Email',
    'auth.signup': 'Sign Up',
    'auth.login': 'Log in',
    'auth.signin': 'Sign in',
    'auth.fullName': 'Full Name',
    'auth.phone': 'Phone number',
    'auth.password': 'Password',
    'auth.repeatPassword': 'Repeat password',
    'auth.rememberMe': 'Remember me',
    'auth.forgetPassword': 'Forget Password?',
    'auth.enterName': 'Enter your Name',
    'auth.enterPhone': 'Enter your number',
    'auth.enterEmail': 'Enter your Email',
    'auth.enterPassword': 'At least 8 characters',
    'auth.alreadyHaveAccount': 'Already have an account ?',
    'auth.newHere': 'New here ?',
    'auth.createAccount': 'Create account',
    'auth.signInWithGoogle': 'Sign in with Google',
    'auth.signInWithFacebook': 'Sign in with Facebook',
    'auth.or': 'OR',
    'auth.errors.emailInvalid': 'Invalid email format, use name@example.com',
    'auth.errors.passwordMin': 'Password must be at least 8 characters',
    'auth.errors.nameRequired': 'Name is required',
    'auth.errors.phoneInvalid': 'Enter a valid phone number',
    'auth.errors.passwordMismatch': 'Passwords do not match',
    'auth.errors.noUser': 'No account with this email, please sign up',
    'auth.errors.badPassword': 'Incorrect password',
    'auth.errors.userExists': 'This email is already registered, please log in',
    'auth.errors.general': 'An error occurred, please try again',
    'auth.errors.enterEmailFirst': 'Enter your email first',
    'auth.resetLinkSent': 'Reset link sent (demo)',
    'button.confirm': 'Confirm',
    'courseDetail.lessons': 'Lessons',
    'courseDetail.subscribe': 'Subscribe',
    'courseDetail.start': 'Start Watching',
    'courseDetail.notFound': 'Course not found',
    'courseDetail.overview': 'Course Overview',
    'courseDetail.outline': 'Course Outline',
    'courseDetail.otherCourses': 'Other courses to learn',
    'courseDetail.viewDetails': 'View Details',
    'courseDetail.lockedLesson': 'Subscribe to watch this lesson',
    'courseDetail.subtitle': '25% off — make {title} easier for your child!',
    'subscribe.title': 'Subscribe',
    'subscribe.confirmText': '{title} will be added to your subscriptions.',
    'profile.title': 'My Courses',
    'profile.empty': 'No subscriptions yet',
    'notFound.title': '404',
    'notFound.back': 'Back to Home',
    'player.locked': 'Subscribe to watch the video',
    'tests.title': 'Tests',
    'tests.subtitle': 'Test your knowledge with interactive quizzes',
    'tests.course': 'Course',
    'tests.start': 'Start Test',
    'tests.empty': 'No tests available at the moment',
    'play.title': 'Play with Us',
    'play.subtitle': 'Enjoy fun interactive games and activities',
    'play.games': 'Educational Games',
    'play.gamesDesc': 'Fun games that help you learn',
    'play.activities': 'Interactive Activities',
    'play.activitiesDesc': 'Fun and engaging activities',
    'play.challenges': 'Challenges',
    'play.challengesDesc': 'Challenges to test your skills',
    'testimonials.title': 'Trusted by Parents',
    'testimonials.subtitle': 'Real reviews from families who love learning with us',
    'testimonials.quote': 'My daughter loves the Arabic lessons! She asks to play them every day - it feels like a game, not homework.',
    'testimonials.author': 'Sara, Egypt - Mother of Waleed',
    'footer.tagline': 'Helping little minds learn, grow, and shine every day.',
    'footer.about': 'About',
    'footer.aboutUs': 'About Us',
    'footer.contact': 'Contact',
    'footer.contactInfo': 'Contact Info',
    'footer.pages': 'Pages',
    'footer.feedbacks': 'Feedbacks',
    'footer.phone': '+011290033300',
    'footer.email': 'Kidsademy@org.com',
    'footer.address': '12 str New Cairo, Cairo.',
    'footer.newsletter': 'Subscribe to Our Newsletter',
    'footer.emailPlaceholder': 'Enter Email Address',
    'footer.subscribe': 'Subscribe',
    'footer.copyright': '© 2025 – All rights reserved.',
    'home.heroLine1': 'Where Learning',
    'home.heroLine2': 'Feels Like',
    'home.heroLine3': 'Playtime',
    'home.exploreNow': 'Explore Now',
    'home.topCourses': 'Our Top Courses',
    'home.viewDetails': 'View Details',
    'course.learnArabic': 'Learn Arabic',
    'course.learnArabicDesc': 'Letters, sounds, and simple words made easy through stories and games.',
    'course.abcLearning': 'Abc Learning',
    'course.abcLearningDesc': 'ABC with games, songs, and stories! Learn new words and say them out loud.',
    'course.123Learning': '123 Learning',
    'course.123LearningDesc': 'Count 1, 2, 3 with fun puzzles and shapes! Add, match, and solve tiny challenges.',
    'course.tag.music': 'Music',
    'course.tag.games': 'Games',
    'course.tag.puzzles': 'Puzzles',
    'course.tag.spell': 'Spell',
    'course.tag.stories': 'Stories',
    'course.tag.count': 'Count',
    'course.tag.score': 'Score',
    'testimonials.quote1': 'My daughter loves the Arabic lessons! She asks to play them every day — it feels like a game, not homework.',
    'testimonials.author1': 'Sara, Egypt',
    'testimonials.role1': 'Mother of Waleed',
    'testimonials.quote2': 'The math games made my son excited to practice numbers. He now teaches his younger sister too!',
    'testimonials.author2': 'Nour, UAE',
    'testimonials.role2': 'Mother of Sami',
    'testimonials.quote3': "Interactive lessons kept my kids engaged and happy. I've never seen them this eager to learn.",
    'testimonials.author3': 'Lina, KSA',
    'testimonials.role3': 'Mother of Jana & Omar',
    'nav.admin': 'Admin',
    'nav.loginButton': 'Login',
    'nav.signupButton': 'Sign up',
    'explore.title': 'Explore',
    'explore.courses': 'Courses',
    'explore.filters': 'Filters',
    'explore.ages': 'Ages',
    'explore.sortBy': 'Sort By',
    'explore.all': 'All',
    'explore.free': 'Free',
    'explore.paid': 'Paid',
    'explore.viewDetails': 'View Details',
    'explore.ageRange.3-5': '3 Years to 5 Years',
    'explore.ageRange.4-6': '4 Years to 6 Years',
    'explore.ageRange.5-7': '5 Years to 7 Years',
    'explore.ageRange.6-8': '6 Years to 8 Years',
    'explore.ageRange.7-9': '7 Years to 9 Years',
    'explore.ageRange.8-10': '8 Years to 10 Years',
    'explore.sortAll': 'All',
    'explore.sortAZ': 'A to Z',
    'explore.sortZA': 'Z to A',
    'explore.sortPriceHigh': 'Price (High to low)',
    'explore.sortPriceLow': 'Price (low to High)',
    'explore.years': 'yrs',
    'explore.lessons': 'lessons',
    'explore.courseFilters': 'Course filters'
  }
}

export const useI18nStore = defineStore('i18n', {
  state: () => ({ locale: 'ar' }),
  actions: {
    t(key, params) {
      const msg = messages[this.locale][key] || key
      if (!params) return msg
      return msg.replace(/\{(\w+)\}/g, (_, k) => params[k] ?? '')
    },
    apply() {
      const isAr = this.locale === 'ar'
      document.documentElement.lang = this.locale
      document.documentElement.dir = isAr ? 'rtl' : 'ltr'
    },
    load() {
      const raw = localStorage.getItem(LS_KEY)
      if (raw) this.locale = raw
      this.apply()
    },
    setLocale(loc) {
      this.locale = loc
      localStorage.setItem(LS_KEY, loc)
      this.apply()
    }
  }
})
